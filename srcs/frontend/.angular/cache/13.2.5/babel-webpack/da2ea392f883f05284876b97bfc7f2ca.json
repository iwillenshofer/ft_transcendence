{"ast":null,"code":"import _asyncToGenerator from \"/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../button/button.component\";\nexport class LoginpageComponent {\n  constructor() {\n    this.title = 'auth';\n    this.popup = null;\n    this.intervalId = null;\n  }\n\n  ngOnInit() {}\n\n  displayPopup() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      const url = 'http://signin.intra.42.fr';\n      const h = 500;\n      const w = 330;\n      const parentX = window.top ? window.top.screenX : 0;\n      const parentY = window.top ? window.top.screenY : 0;\n      const parentHeight = window.top ? window.top.outerHeight : h;\n      const parentWidth = window.top ? window.top.outerWidth : w;\n      const childX = parentWidth / 2 + parentX - h / 2;\n      const childY = parentHeight / 2 + parentY - h / 2;\n      _this.popup = window.open(url, _this.title, `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${childY}, left=${childX}`);\n      _this.intervalId = (_a = _this.popup) === null || _a === void 0 ? void 0 : _a.setInterval(() => {\n        let href;\n\n        try {\n          href = _this.popup ? _this.popup.location.href : '';\n\n          if (href) {\n            const getQueryString = function (field, url) {\n              const windowLocationUrl = url ? url : href;\n              const reg = new RegExp('[?&]' + field + '=([^&#]*)', 'i');\n              const string = reg.exec(windowLocationUrl);\n              return string ? string[1] : null;\n            };\n          }\n        } catch (e) {\n          console.log('Error:', e);\n        }\n      }, 100);\n    })();\n  }\n\n  closedPopup() {\n    console.log('unload');\n  }\n\n}\n\nLoginpageComponent.ɵfac = function LoginpageComponent_Factory(t) {\n  return new (t || LoginpageComponent)();\n};\n\nLoginpageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginpageComponent,\n  selectors: [[\"app-loginpage\"]],\n  decls: 3,\n  vars: 0,\n  consts: [[\"name\", \"Login\", 3, \"btnClick\"]],\n  template: function LoginpageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"This will be an image\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"app-button\", 0);\n      i0.ɵɵlistener(\"btnClick\", function LoginpageComponent_Template_app_button_btnClick_2_listener() {\n        return ctx.displayPopup();\n      });\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i1.ButtonComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbnBhZ2UuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["/frontend/src/app/components/login/loginpage/loginpage.component.ts"],"names":["i0","i1","LoginpageComponent","constructor","title","popup","intervalId","ngOnInit","displayPopup","_a","url","h","w","parentX","window","top","screenX","parentY","screenY","parentHeight","outerHeight","parentWidth","outerWidth","childX","childY","open","setInterval","href","location","getQueryString","field","windowLocationUrl","reg","RegExp","string","exec","e","console","log","closedPopup","ɵfac","LoginpageComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","LoginpageComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginpageComponent_Template_app_button_btnClick_2_listener","directives","ButtonComponent","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../button/button.component\";\nexport class LoginpageComponent {\n    constructor() {\n        this.title = 'auth';\n        this.popup = null;\n        this.intervalId = null;\n    }\n    ngOnInit() {\n    }\n    async displayPopup() {\n        var _a;\n        const url = 'http://signin.intra.42.fr';\n        const h = 500;\n        const w = 330;\n        const parentX = window.top ? window.top.screenX : 0;\n        const parentY = window.top ? window.top.screenY : 0;\n        const parentHeight = window.top ? window.top.outerHeight : h;\n        const parentWidth = window.top ? window.top.outerWidth : w;\n        const childX = parentWidth / 2 + parentX - (h / 2);\n        const childY = parentHeight / 2 + parentY - (h / 2);\n        this.popup = window.open(url, this.title, `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${childY}, left=${childX}`);\n        this.intervalId = (_a = this.popup) === null || _a === void 0 ? void 0 : _a.setInterval(() => {\n            let href;\n            try {\n                href = this.popup ? this.popup.location.href : '';\n                if (href) {\n                    const getQueryString = function (field, url) {\n                        const windowLocationUrl = url ? url : href;\n                        const reg = new RegExp('[?&]' + field + '=([^&#]*)', 'i');\n                        const string = reg.exec(windowLocationUrl);\n                        return string ? string[1] : null;\n                    };\n                }\n            }\n            catch (e) {\n                console.log('Error:', e);\n            }\n        }, 100);\n    }\n    closedPopup() {\n        console.log('unload');\n    }\n}\nLoginpageComponent.ɵfac = function LoginpageComponent_Factory(t) { return new (t || LoginpageComponent)(); };\nLoginpageComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LoginpageComponent, selectors: [[\"app-loginpage\"]], decls: 3, vars: 0, consts: [[\"name\", \"Login\", 3, \"btnClick\"]], template: function LoginpageComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"This will be an image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"app-button\", 0);\n        i0.ɵɵlistener(\"btnClick\", function LoginpageComponent_Template_app_button_btnClick_2_listener() { return ctx.displayPopup(); });\n        i0.ɵɵelementEnd();\n    } }, directives: [i1.ButtonComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbnBhZ2UuY29tcG9uZW50LmNzcyJ9 */\"] });\n"]},"metadata":{},"sourceType":"module"}